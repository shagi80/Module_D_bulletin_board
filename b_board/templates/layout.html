<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Объявления | {% block title %}{% endblock title %}</title>
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">>
    {{ form.media }}
  </head>

  <body>

    <main class="container col-11">
      
        <div id="TopLevel"></div>

        <nav class="navbar sticky-top p-3 bg-dark text-white">         
          <div class="col col-lg-auto d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">                  
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                    <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z"/>
                </svg>
            </a>
            <ul class="nav col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="/" class="nav-link px-2 text-white">Главная</a></li>
              {% if request.user.is_authenticated %}
                <li><a href="{% url 'create_adver' %}" class="nav-link px-2 text-white">Добавить новость</a></li>
                <li><a href="{% url 'user_page' %}" class="nav-link px-2 text-white">Моя страница</a></li>
              {% endif %}
            </ul>
          </div>  

          <div class='col-12 col-lg-auto text-center'>
            {% if request.user.is_authenticated %} 
              <div>                  
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
                </svg>
                <span class='mx-2'>{{ request.user.username }}</span>                               
                <a href="/accounts/logout/" role="button" class="btn btn-outline-light btn-sm">выйти</a>  
              </div>                 
            {% else %}  
              <div class="col">            
                <a href="/accounts/login/" role="button" class="btn btn-outline-light btn-sm mx-2">войти</a>   
              </div>                     
            {% endif %}
          </div>           
        </nav>

        <!-- вывод сообщений -->
        <div class="container-fluid mt-2">
          {% for message in messages %}
            {% if message.tags == 'error' %}
                <div class="alert alert-danger alert-dismissible fade show text-center align-items-center" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% else %}
                <div class="alert alert-{{message.tags}} alert-dismissible fade show text-center align-items-center" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}
          {% endfor %}
        </div>

        
        {% block content %}
        {% endblock content %}   

        <!-- кнопка Вверх -->
        <div id='go_to_top' class="position-fixed bottom-0 end-0 p-5" style="display: none">
          <a href="#TopLevel" class="btn btn-secondary" role="button">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-capslock-fill" viewBox="0 0 16 16">
                  <path d="M7.27 1.047a1 1 0 0 1 1.46 0l6.345 6.77c.6.638.146 1.683-.73 1.683H11.5v1a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-1H1.654C.78 9.5.326 8.455.924 7.816L7.27 1.047zM4.5 13.5a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-1z"/>
              </svg>
          </a>
        </div>

    </main>

    <!-- Bootstrap core JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- подключеие JQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <!-- скрипт показа кнопки Вверх -->
    <script>
      var go_to_top = $('#go_to_top');
  
      $(window).scroll(function() {
        if ($(window).scrollTop() > 10)  {                  
          go_to_top.css("display", "block");
        } else {
          go_to_top.css("display", "none");
        }; 
      });
    </script>


    {% block script %}
    {% endblock script %}

  </body>

</html>